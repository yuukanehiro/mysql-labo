# Case 1: é€†é †ã§ã®æ›´æ–°ã«ã‚ˆã‚‹ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯å†ç¾

## ğŸ¯ ç›®çš„

2ã¤ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãŒã€ç•°ãªã‚‹è¡Œã‚’é€†é †ã§æ›´æ–°ã—ã‚ˆã†ã¨ã—ãŸã¨ãã«ç™ºç”Ÿã™ã‚‹ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯ã‚’å†ç¾ã—ã¾ã™ã€‚

---

## ğŸ— å‰æ

åˆæœŸãƒ‡ãƒ¼ã‚¿ï¼ˆDockerã§è‡ªå‹•ä½œæˆï¼‰:

```sql
CREATE DATABASE IF NOT EXISTS test_db;
USE test_db;
CREATE TABLE IF NOT EXISTS users (
  id INT PRIMARY KEY,
  name VARCHAR(50)
);
INSERT INTO users (id, name) VALUES (1, 'Alice'), (2, 'Bob');
```


Transaction A:
```sql
USE test_db;
START TRANSACTION;
UPDATE users SET name = 'Alice_updated' WHERE id = 1;
```

Transaction B:
```sql
USE test_db;
START TRANSACTION;
UPDATE users SET name = 'Bob_updated' WHERE id = 2;
```

Transaction A:
```sql
UPDATE users SET name = 'Alice_conflict' WHERE id = 2;
```

Transaction B:
```sql
UPDATE users SET name = 'Bob_conflict' WHERE id = 1;
ERROR 1213 (40001): Deadlock found when trying to get lock; try restarting transaction
```



